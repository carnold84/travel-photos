{"version":3,"sources":["components/Map/index.js","components/Map/Map.js","views/Collection/Collection.js","views/Collection/index.js","components/AppLink/AppLink.js","components/AppLink/index.js","components/Button/Button.js","components/Button/index.js","components/Layout/Layout.js","components/Layout/index.js","components/View/View.js","components/View/index.js","components/Picture/Picture.js","components/Picture/index.js"],"names":["Map","forwardRef","ref","markers","position","elMarkerGroup","useRef","style","height","width","MapContainer","bounds","zoom","center","scrollWheelZoom","whenCreated","evt","nextMap","fitBounds","current","getBounds","padding","TileLayer","attribution","noWrap","url","FeatureGroup","map","marker","latitude","longitude","Marker","eventHandlers","click","onClick","Tooltip","orientation","Picture","alt","name","thumbUrl","margin","textAlign","id","Collection","history","useHistory","params","useParams","location","useLocation","collectionId","initialCollection","useCollection","collection","useMemo","mapRef","useMapPosition","mapPosition","setMapPosition","console","log","content","photos","to","push","useEffect","getCenter","getZoom","View","level","Layout","backTo","from","path","noContentPadding","title","AppLink","children","rest","Button","as","className","Tag","join","leftControls","rightControls","viewBox","xmlns","d","isOver","motion","div","animate","exit","initial","zIndex","variants","hidden","y","transition","ease","duration","show","scale","useState","isLoading","setIsLoading","opacity","setOpacity","elWrapper","elImage","src","Spinner","onLoad"],"mappings":"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","file":"static/js/4.83c8d89e.chunk.js","sourcesContent":["import Map from './Map';\n\nexport default Map;\n","import { forwardRef, useEffect, useRef, useState } from 'react';\nimport {\n  MapContainer,\n  TileLayer,\n  Marker,\n  FeatureGroup,\n  Tooltip,\n} from 'react-leaflet';\nimport Picture from '../Picture';\nimport './Map.css';\n\nconst Map = forwardRef(({ markers = [], position }, ref) => {\n  const elMarkerGroup = useRef(null);\n\n  const onCreated = (evt) => {\n    const nextMap = evt;\n    nextMap.fitBounds(elMarkerGroup.current.getBounds(), {\n      padding: [40, 40],\n    });\n    ref.current = nextMap;\n  };\n\n  return (\n    <div style={{ height: '100%', width: '100%' }}>\n      <MapContainer\n        bounds={position.zoom ?? 0}\n        center={position.center ?? [0, 0]}\n        scrollWheelZoom={true}\n        style={{ height: '100%', width: '100%' }}\n        whenCreated={onCreated}\n        zoom={position.zoom ?? 0}>\n        <TileLayer\n          attribution={\n            'Map tiles by Carto, under CC BY 3.0. Data by OpenStreetMap, under ODbL.'\n          }\n          noWrap={true}\n          url={\n            'https://cartodb-basemaps-{s}.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png'\n          }\n        />\n        <FeatureGroup ref={elMarkerGroup}>\n          {markers.map((marker) => {\n            if (marker.latitude && marker.longitude) {\n              return (\n                <Marker\n                  key={marker.id}\n                  eventHandlers={{\n                    click: marker.onClick,\n                  }}\n                  position={[marker.latitude, marker.longitude]}>\n                  <Tooltip>\n                    <div\n                      style={{\n                        height:\n                          marker.orientation === 'portrait' ? '200px' : null,\n                        width:\n                          marker.orientation === 'landscape' ? '200px' : null,\n                      }}>\n                      <Picture\n                        alt={marker.name}\n                        height={\n                          marker.orientation === 'portrait' ? '200px' : null\n                        }\n                        url={marker.thumbUrl}\n                        width={\n                          marker.orientation === 'landscape' ? '200px' : null\n                        }\n                      />\n                    </div>\n                    <div style={{ margin: '5px 0 0', textAlign: 'center' }}>\n                      Click marker to view\n                    </div>\n                  </Tooltip>\n                </Marker>\n              );\n            }\n\n            return null;\n          })}\n        </FeatureGroup>\n      </MapContainer>\n    </div>\n  );\n});\n\nexport default Map;\n","import { useHistory, useLocation, useParams } from 'react-router-dom';\nimport { useEffect, useMemo, useRef } from 'react';\nimport Layout from '../../components/Layout';\nimport Map from '../../components/Map';\nimport View from '../../components/View';\nimport { useCollection } from '../../hooks';\nimport { useMapPosition } from '../../hooks';\nimport './Collection.css';\n//import { useRoutesData } from '../../hooks/hooks';\n\nconst Collection = () => {\n  const history = useHistory();\n  const params = useParams();\n  const location = useLocation();\n  //const [routesData, setRoutesData] = useRoutesData();\n  const collectionId = params?.collectionId;\n  const initialCollection = useCollection(collectionId);\n  // store collection so it still show when closing\n  const collection = useMemo(() => {\n    return initialCollection;\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  const mapRef = useRef();\n  const [mapPosition, setMapPosition] = useMapPosition();\n\n  console.log(collection);\n  const markers = useMemo(() => {\n    return collection?.photos.map(\n      ({ id, latitude, longitude, name, orientation, thumbUrl }) => {\n        return {\n          id,\n          latitude,\n          longitude,\n          name,\n          orientation,\n          onClick: () => {\n            const to = `/collection/${collection.id}/photo/${id}`;\n            /* setRoutesData({\n            current: to,\n            previous: routesData.current,\n          }); */\n            history.push(to);\n          },\n          thumbUrl,\n        };\n      }\n    );\n  }, [collection, history]);\n\n  console.log(markers);\n\n  useEffect(() => {\n    return () => {\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n      const map = mapRef.current;\n      if (map) {\n        setMapPosition({\n          bounds: map.getBounds(),\n          center: map.getCenter(),\n          zoom: map.getZoom(),\n        });\n      }\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  let content;\n\n  if (collection) {\n    content = <Map markers={markers} position={mapPosition} ref={mapRef} />;\n  } else {\n    content = <div>Collection doesn't exist.</div>;\n  }\n\n  /* let isOver = true;\n  if (\n    routesData.current?.includes('photo') ||\n    routesData.previous?.includes('photo')\n  ) {\n    isOver = false;\n  } */\n\n  return (\n    <View id={'collection'} level={1} /* isOver={isOver} */>\n      <Layout\n        backTo={'/'}\n        from={location?.path}\n        id={'collection'}\n        noContentPadding={true}\n        title={collection?.name}>\n        {content}\n      </Layout>\n    </View>\n  );\n};\n\nexport default Collection;\n","import Collection from './Collection';\n\nexport default Collection;\n","import { Link } from 'react-router-dom';\n//import { useRoutesData } from '../../hooks/hooks';\nimport './AppLink.css';\n\nconst AppLink = ({ children, to, ...rest }) => {\n  //const [routesData, setRoutesData] = useRoutesData();\n\n  /* const onClick = () => {\n    setRoutesData({\n      current: to,\n      previous: routesData.current,\n    });\n  }; */\n\n  return (\n    <Link to={to} {...rest}>\n      {children}\n    </Link>\n  );\n};\n\nexport default AppLink;\n","import AppLink from './AppLink';\n\nexport default AppLink;\n","import './Button.css';\n\nconst Button = ({ as = 'button', className, children, onClick, ...rest }) => {\n  const Tag = as;\n\n  return (\n    <Tag\n      className={['button', className].join(' ')}\n      onClick={onClick}\n      {...rest}>\n      {children}\n    </Tag>\n  );\n};\n\nexport default Button;\n","import Button from './Button';\n\nexport default Button;\n","import AppLink from '../AppLink';\nimport Button from '../Button';\nimport './Layout.css';\n\nconst Layout = ({\n  backTo,\n  children,\n  from,\n  id,\n  leftControls,\n  noContentPadding = false,\n  rightControls,\n  title,\n  ...rest\n}) => {\n  return (\n    <div className=\"layout\" {...rest}>\n      <header className={'layout-header'}>\n        <div className={'layout-left-controls'} {...rest}>\n          {backTo && (\n            <AppLink from={from} to={backTo}>\n              <Button as={'span'} className={'layout-back-btn'}>\n                <svg\n                  width=\"8\"\n                  height=\"14\"\n                  viewBox=\"0 0 8 14\"\n                  xmlns=\"http://www.w3.org/2000/svg\">\n                  <path d=\"M0.288025 7.00001L6.29802 13.01L7.71202 11.596L3.11202 6.99601L7.71202 2.39601L6.29802 0.990005L0.288025 7.00001Z\" />\n                </svg>\n              </Button>\n            </AppLink>\n          )}\n          {title && <h3 className={'layout-title'}>{title}</h3>}\n          {leftControls}\n        </div>\n        <div className={'layout-right-controls'}>{rightControls}</div>\n      </header>\n      <main\n        className={[\n          'layout-content',\n          noContentPadding ? 'no-padding' : null,\n        ].join(' ')}>\n        {children}\n      </main>\n    </div>\n  );\n};\n\nexport default Layout;\n","import Layout from './Layout';\n\nexport default Layout;\n","import { motion } from 'framer-motion';\nimport './View.css';\n\nconst View = ({ children, id, isOver = true, level, ...rest }) => {\n  const under = {\n    hidden: { scale: 0.9, transition: { ease: 'easeOut', duration: 0.3 } },\n    show: { scale: 1, transition: { ease: 'easeOut', duration: 0.3 } },\n  };\n\n  const over = {\n    hidden: { y: '100%', transition: { ease: 'easeIn', duration: 0.3 } },\n    show: { y: 0, transition: { ease: 'easeOut', duration: 0.3 } },\n  };\n\n  return (\n    <motion.div\n      animate={'show'}\n      className={'view'}\n      exit={'hidden'}\n      initial={'hidden'}\n      style={{\n        zIndex: level,\n      }}\n      variants={isOver === true ? over : under}\n      {...rest}>\n      {children}\n    </motion.div>\n  );\n};\n\nexport default View;\n","import View from './View';\n\nexport default View;\n","import React, { useEffect, useRef, useState } from 'react';\nimport Spinner from '../Spinner';\nimport './Picture.css';\n\nconst Picture = ({ alt = '', height = '100%', url, width = '100%' }) => {\n  const [isLoading, setIsLoading] = useState(true);\n  const [opacity, setOpacity] = useState(0);\n  const elWrapper = useRef();\n  const elImage = useRef();\n\n  const onImageLoaded = () => {\n    setOpacity(1);\n    setIsLoading(false);\n  };\n\n  useEffect(() => {\n    elImage.current.src = url;\n  }, [url]);\n\n  return (\n    <div className={'picture'} ref={elWrapper} style={{ height, width }}>\n      {isLoading && (\n        <div className={'loading_screen'}>\n          <Spinner />\n        </div>\n      )}\n      <div\n        className={'picture_container'}\n        style={{\n          height,\n          opacity,\n          width,\n        }}>\n        <img\n          className={'image'}\n          alt={alt}\n          onLoad={onImageLoaded}\n          ref={elImage}\n          style={{ height, width }}\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default Picture;\n","import Picture from './Picture';\n\nexport default Picture;\n"],"sourceRoot":""}