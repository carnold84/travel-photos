{"version":3,"sources":["components/AppLink/AppLink.js","components/AppLink/index.js","components/Button/Button.js","components/Button/index.js","components/Layout/Layout.js","components/Layout/index.js","components/View/View.js","components/View/index.js","views/Upload/SelectPhotos/index.js","views/Upload/SelectPhotos/SelectPhotos.js","views/Upload/SelectCollection/SelectCollection.js","views/Upload/SelectCollection/index.js","views/Upload/Upload.js","views/Upload/index.js"],"names":["AppLink","children","to","rest","Button","as","className","onClick","Tag","join","Layout","backTo","from","leftControls","id","noContentPadding","rightControls","title","width","height","viewBox","xmlns","d","View","isOver","level","motion","div","animate","exit","initial","style","zIndex","variants","hidden","y","transition","ease","duration","show","scale","SelectPhotos","onCancel","onNext","onUpdate","photos","createPhotos","useCreatePhotos","elFileInput","useRef","onChange","evt","a","files","target","urls","file","push","URL","createObjectURL","nextPhotos","console","log","JSON","stringify","data","current","click","multiple","ref","type","map","photo","location","name","url","alt","src","COLLECTION_TYPE","SelectCollection","onBack","onSave","useState","collectionType","setCollectionType","collectionName","setCollectionName","collections","useCollections","selectedCollectionId","setSelectedCollectionId","onCollectionTypeChange","value","onSelectCollection","length","htmlFor","checked","collection","STEPS","Upload","step","setStep","setPhotos","history","useHistory","createCollection","useCreateCollection","updateCollection","useUpdateCollection","onClose","psuh"],"mappings":"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","file":"static/js/6.9df32550.chunk.js","sourcesContent":["import { Link } from 'react-router-dom';\n//import { useRoutesData } from '../../hooks/hooks';\nimport './AppLink.css';\n\nconst AppLink = ({ children, to, ...rest }) => {\n  //const [routesData, setRoutesData] = useRoutesData();\n\n  /* const onClick = () => {\n    setRoutesData({\n      current: to,\n      previous: routesData.current,\n    });\n  }; */\n\n  return (\n    <Link to={to} {...rest}>\n      {children}\n    </Link>\n  );\n};\n\nexport default AppLink;\n","import AppLink from './AppLink';\n\nexport default AppLink;\n","import './Button.css';\n\nconst Button = ({ as = 'button', className, children, onClick, ...rest }) => {\n  const Tag = as;\n\n  return (\n    <Tag\n      className={['button', className].join(' ')}\n      onClick={onClick}\n      {...rest}>\n      {children}\n    </Tag>\n  );\n};\n\nexport default Button;\n","import Button from './Button';\n\nexport default Button;\n","import AppLink from '../AppLink';\nimport Button from '../Button';\nimport './Layout.css';\n\nconst Layout = ({\n  backTo,\n  children,\n  from,\n  id,\n  leftControls,\n  noContentPadding = false,\n  rightControls,\n  title,\n  ...rest\n}) => {\n  return (\n    <div className=\"layout\" {...rest}>\n      <header className={'layout-header'}>\n        <div className={'layout-left-controls'} {...rest}>\n          {backTo && (\n            <AppLink from={from} to={backTo}>\n              <Button as={'span'} className={'layout-back-btn'}>\n                <svg\n                  width=\"8\"\n                  height=\"14\"\n                  viewBox=\"0 0 8 14\"\n                  xmlns=\"http://www.w3.org/2000/svg\">\n                  <path d=\"M0.288025 7.00001L6.29802 13.01L7.71202 11.596L3.11202 6.99601L7.71202 2.39601L6.29802 0.990005L0.288025 7.00001Z\" />\n                </svg>\n              </Button>\n            </AppLink>\n          )}\n          {title && <h3 className={'layout-title'}>{title}</h3>}\n          {leftControls}\n        </div>\n        <div className={'layout-right-controls'}>{rightControls}</div>\n      </header>\n      <main\n        className={[\n          'layout-content',\n          noContentPadding ? 'no-padding' : null,\n        ].join(' ')}>\n        {children}\n      </main>\n    </div>\n  );\n};\n\nexport default Layout;\n","import Layout from './Layout';\n\nexport default Layout;\n","import { motion } from 'framer-motion';\nimport './View.css';\n\nconst View = ({ children, id, isOver = true, level, ...rest }) => {\n  const under = {\n    hidden: { scale: 0.9, transition: { ease: 'easeOut', duration: 0.3 } },\n    show: { scale: 1, transition: { ease: 'easeOut', duration: 0.3 } },\n  };\n\n  const over = {\n    hidden: { y: '100%', transition: { ease: 'easeIn', duration: 0.3 } },\n    show: { y: 0, transition: { ease: 'easeOut', duration: 0.3 } },\n  };\n\n  return (\n    <motion.div\n      animate={'show'}\n      className={'view'}\n      exit={'hidden'}\n      initial={'hidden'}\n      style={{\n        zIndex: level,\n      }}\n      variants={isOver === true ? over : under}\n      {...rest}>\n      {children}\n    </motion.div>\n  );\n};\n\nexport default View;\n","import View from './View';\n\nexport default View;\n","import SelectPhotos from './SelectPhotos';\n\nexport default SelectPhotos;\n","import { useRef } from 'react';\nimport Button from '../../../components/Button';\nimport { useCreatePhotos } from '../../../hooks/hooks';\nimport './SelectPhotos.css';\n\nconst SelectPhotos = ({ onCancel, onNext, onUpdate, photos }) => {\n  const createPhotos = useCreatePhotos();\n  const elFileInput = useRef();\n\n  const onChange = async (evt) => {\n    const { files } = evt.target;\n\n    if (files) {\n      const urls = [];\n      for (const file of files) {\n        urls.push(URL.createObjectURL(file));\n      }\n\n      let nextPhotos = await createPhotos(urls);\n\n      console.log(JSON.stringify(nextPhotos));\n      onUpdate(nextPhotos.data);\n    }\n  };\n\n  const onSelectImages = () => {\n    elFileInput.current.click();\n  };\n\n  console.log(photos);\n\n  return (\n    <div className={'select_photos'}>\n      <h2>Choose Photos</h2>\n      <div className={'image_input'}>\n        <Button onClick={onSelectImages} style={{ width: '100%' }}>\n          Select Images\n        </Button>\n        <input\n          multiple={true}\n          onChange={onChange}\n          ref={elFileInput}\n          type={'file'}\n        />\n      </div>\n      <div>\n        {!photos && 'Loading...'}\n        {photos &&\n          photos.map((photo) => {\n            const { id, location, name, url } = photo;\n            if (location) {\n              return (\n                <img alt={name} key={id} src={url} style={{ width: '140px' }} />\n              );\n            }\n            return 'No location data';\n          })}\n      </div>\n      <div className={'footer'}>\n        <Button onClick={onCancel}>Cancel</Button>\n        <Button onClick={onNext}>Next</Button>\n      </div>\n    </div>\n  );\n};\n\nexport default SelectPhotos;\n","import { useState } from 'react';\nimport { useCollections } from '../../../hooks';\nimport './SelectCollection.css';\n\nconst COLLECTION_TYPE = {\n  CHOOSE: 'choose',\n  NEW: 'new',\n};\n\nconst SelectCollection = ({ onBack, onCancel, onSave }) => {\n  const [collectionType, setCollectionType] = useState(COLLECTION_TYPE.NEW);\n  const [collectionName, setCollectionName] = useState('');\n  const collections = useCollections();\n  const [selectedCollectionId, setSelectedCollectionId] = useState(\n    collections[0]?.id\n  );\n\n  const onCollectionTypeChange = (evt) => {\n    console.log(evt.target.value);\n    setCollectionType(evt.target.value);\n  };\n\n  const onSelectCollection = (evt) => {\n    console.log(evt.target.value);\n    setSelectedCollectionId(evt.target.value);\n  };\n\n  const onCollectionNameChange = (evt) => {\n    setCollectionName(evt.target.value);\n  };\n\n  const onSavePhotos = () => {\n    if (collectionType === COLLECTION_TYPE.NEW) {\n      onSave(null, collectionName);\n    } else {\n      onSave(selectedCollectionId, collectionName);\n    }\n  };\n\n  return (\n    <div>\n      <h2>Choose Collection</h2>\n      {collections.length > 0 && (\n        <div>\n          <label htmlFor=\"new-collection\">New Collection:</label>\n          <input\n            checked={collectionType === COLLECTION_TYPE.NEW}\n            id={'new-collection'}\n            name={'collection'}\n            onChange={onCollectionTypeChange}\n            type={'radio'}\n            value={COLLECTION_TYPE.NEW}\n          />\n          <label htmlFor=\"choose-collection\">Choose Collection:</label>\n          <input\n            checked={collectionType === COLLECTION_TYPE.CHOOSE}\n            id={'choose-collection'}\n            name={'collection'}\n            onChange={onCollectionTypeChange}\n            type={'radio'}\n            value={COLLECTION_TYPE.CHOOSE}\n          />\n        </div>\n      )}\n      {collectionType === COLLECTION_TYPE.NEW && (\n        <div>\n          <label htmlFor={'collection-name'}>Collection Name</label>\n          <input onChange={onCollectionNameChange} type={'text'} />\n        </div>\n      )}\n      {collectionType === COLLECTION_TYPE.CHOOSE && (\n        <div>\n          {collections.map((collection) => {\n            return (\n              <label htmlFor={collection.id} key={collection.id}>\n                <input\n                  checked={selectedCollectionId === collection.id}\n                  id={collection.id}\n                  name={'collections'}\n                  onChange={onSelectCollection}\n                  type={'radio'}\n                  value={collection.id}\n                />\n                {collection.name}\n              </label>\n            );\n          })}\n        </div>\n      )}\n      <button onClick={onCancel}>Cancel</button>\n      <button onClick={onBack}>Back</button>\n      <button onClick={onSavePhotos}>Save Photos</button>\n    </div>\n  );\n};\n\nexport default SelectCollection;\n","import SelectCollection from './SelectCollection';\n\nexport default SelectCollection;\n","import { useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { useCreateCollection, useUpdateCollection } from '../../hooks';\nimport SelectPhotos from './SelectPhotos';\nimport SelectCollection from './SelectCollection';\nimport View from '../../components/View';\nimport Layout from '../../components/Layout';\nimport './Upload.css';\n\nconst STEPS = {\n  PHOTOS: 'photos',\n  COLLECTION: 'collection',\n};\n\nconst Upload = () => {\n  const [step, setStep] = useState(STEPS.PHOTOS);\n  const [photos, setPhotos] = useState([]);\n  const history = useHistory();\n  const createCollection = useCreateCollection();\n  const updateCollection = useUpdateCollection();\n\n  const onGoToPhotos = () => {\n    setStep(STEPS.PHOTOS);\n  };\n\n  const onGoToCollection = () => {\n    setStep(STEPS.COLLECTION);\n  };\n\n  const onUpdatePhotos = (data) => {\n    console.log(data);\n    setPhotos([...photos, ...data]);\n  };\n\n  const onClose = () => {\n    history.push('/');\n  };\n\n  const onSave = async (id, name) => {\n    console.log(id, name);\n    if (id) {\n      updateCollection({\n        photos,\n        collection: {\n          id,\n          name,\n        },\n      });\n    } else {\n      createCollection({\n        photos,\n        collection: {\n          name,\n        },\n      });\n    }\n\n    onClose();\n  };\n\n  return (\n    <View level={2}>\n      <Layout\n        id={'upload'}\n        noContentPadding={true}\n        onBack={() => history.psuh('/')}\n        title={'Add Photos'}>\n        {step === STEPS.PHOTOS && (\n          <SelectPhotos\n            onCancel={onClose}\n            onNext={onGoToCollection}\n            onUpdate={onUpdatePhotos}\n            photos={photos}\n          />\n        )}\n        {step === STEPS.COLLECTION && (\n          <SelectCollection\n            onBack={onGoToPhotos}\n            onCancel={onClose}\n            onSave={onSave}\n          />\n        )}\n      </Layout>\n    </View>\n  );\n};\n\nexport default Upload;\n","import Upload from './Upload';\n\nexport default Upload;\n"],"sourceRoot":""}